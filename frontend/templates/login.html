{% extends "base.html" %}
{% block content %}
<div class="card centered-card">
  <h2>Entrar — Fisioterapeuta</h2>
  <div class="form-row">
    <label>Usuário</label>
    <input id="loginUser" type="text" placeholder="usuário">
  </div>
  <div class="form-row">
    <label>Senha</label>
    <input id="loginPass" type="password" placeholder="senha">
  </div>
  <div class="form-row">
    <button id="btnLogin" class="btn-primary">Entrar</button>
  </div>
  <div id="loginMessage" class="form-message"></div>
</div>
<script>
document.getElementById('btnLogin').onclick = async ()=>{
  const u = document.getElementById('loginUser').value;
  const p = document.getElementById('loginPass').value;
  const res = await fetch('/api/login', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({username:u, password:p})
  });
  if (!res.ok){
    const err = await res.json().catch(()=>({error:'Erro'}));
    document.getElementById('loginMessage').textContent = err.error || 'Falha no login';
    return;
  }
  window.location.href = '/dashboard';
};
</script>
{% endblock %}